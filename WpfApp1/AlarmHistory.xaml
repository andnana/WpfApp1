<Window x:Class="WpfApp1.AlarmHistory"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        xmlns:local="clr-namespace:WpfApp1"
        mc:Ignorable="d"
        Title="报警历史" Height="750" Width="1120"
        WindowStartupLocation="CenterScreen"  Background="#eeeeee">
    <StackPanel Orientation="Vertical">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="AUTO"/>
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <ToolBar Foreground="Black"  Padding="10,6" Header="菜单" VerticalAlignment="Center" HorizontalAlignment="Left" Background="#eeeeee">


                <Button Width="100" Height="60" Foreground="Black" Content="复制视频保存目录"  Background="#eeeeee" BorderThickness="0" >
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Vertical">
                                <Image Source="/WpfApp1;component/Resources/copy_video.png" Width="20" Height="20" Margin="4"/>
                                <TextBlock FontSize="10" Text="复制视频保存目录" VerticalAlignment="Center" />
                            </StackPanel>
                        </DataTemplate>
                    </Button.ContentTemplate>
                </Button>
                <Button Width="100" Height="60" Foreground="Black" Content="复制表格保存目录"  Background="#eeeeee" BorderThickness="0" >
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Vertical">
                                <Image Source="/WpfApp1;component/Resources/copy.png" Width="20" Height="20" Margin="4"/>
                                <TextBlock FontSize="10" Text="复制表格保存目录" VerticalAlignment="Center" />
                            </StackPanel>
                        </DataTemplate>
                    </Button.ContentTemplate>
                </Button>
                <Button Width="60" Height="60" Foreground="Black" Content="保存表格"   Background="#eeeeee" BorderThickness="0" >
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Vertical">
                                <Image Source="/WpfApp1;component/Resources/save.png" Width="20" Height="20" Margin="4"/>
                                <TextBlock FontSize="10" Text="保存表格" VerticalAlignment="Center" />
                            </StackPanel>
                        </DataTemplate>
                    </Button.ContentTemplate>
                </Button>

            </ToolBar>
            <Grid Grid.Row="0" Grid.Column="1"  Width="400" HorizontalAlignment="Right" Margin="10">
                <Grid.RowDefinitions>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="6*"/>
                    <ColumnDefinition Width="6*"/>
                    <ColumnDefinition Width="4*"/>
                </Grid.ColumnDefinitions>
                <hc:DatePicker Margin="10"  Grid.Column="0"/>
                <hc:DatePicker Margin="10" Grid.Column="1"/>
                <Button Margin="10"  BorderThickness="0"  Background="#326cf3" Foreground="White"  Grid.Column="2"  Content="刷新" />
            </Grid>
        </Grid>
        <DataGrid HeadersVisibility="All" RowHeaderWidth="60" AutoGenerateColumns="False" ItemsSource="{Binding AlarmHistoryInfo}" CanUserAddRows="False">
            <DataGrid.Columns>
                <DataGridTextColumn IsReadOnly="True" Width="100" CanUserResize="False" Binding="{Binding DeviceIP}"  Header="设备IP"/>
                <DataGridTextColumn IsReadOnly="True" Width="100" CanUserResize="False" Binding="{Binding DeviceName}"  Header="设备名称"/>
                <DataGridTextColumn IsReadOnly="True" Width="140" CanUserResize="False" Binding="{Binding Datetime}"  Header="时间"/>
                <DataGridTextColumn IsReadOnly="True" Width="60" CanUserResize="False" Binding="{Binding concentration}"  Header="浓度"/>
                <DataGridTextColumn IsReadOnly="True" Width="60" CanUserResize="False" Binding="{Binding horizontalAngle}"  Header="水平角度"/>
                <DataGridTextColumn IsReadOnly="True" Width="60" CanUserResize="False" Binding="{Binding verticalAngle}"  Header="垂直角度"/>
                <DataGridTextColumn IsReadOnly="True" Width="60" CanUserResize="False" Binding="{Binding presetPoint}"  Header="预置点"/>
                <DataGridTextColumn IsReadOnly="True" Width="160" CanUserResize="False" Binding="{Binding presetComment}"  Header="预置点备注"/>
                <DataGridTemplateColumn Header="操作">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Button Margin="2" Content="前往" Background="#326cf3" Foreground="White" BorderThickness="0" Command="{Binding DataContext.ValueCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}}" CommandParameter="{Binding DeviceIP}"/>
                                <Button Margin="2" Content="播放视频" Background="#326cf3" Foreground="White" BorderThickness="0"  Command="{Binding DataContext.ValueCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}}" CommandParameter="{Binding DeviceIP}"/>
                                <Button Margin="2" Content="查看图表" Background="#326cf3" Foreground="White" BorderThickness="0" Command="{Binding DataContext.ValueCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}}" CommandParameter="{Binding DeviceIP}"/>
                                <Button Margin="2" Content="删除" Background="Red" Foreground="White" BorderThickness="0" Command="{Binding DataContext.ValueCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}}" CommandParameter="{Binding DeviceIP}" />
                            </StackPanel>

                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </StackPanel>
</Window>
